
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for Triage.">
      
      
      
        <link rel="canonical" href="http://dssg.github.io/triage/experiments/experiment-config/">
      
      
        <link rel="prev" href="../../dirtyduck/for_the_impatient/">
      
      
        <link rel="next" href="../feature-testing/">
      
      
      <link rel="icon" href="../../assets/images/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.4.6">
    
    
      
        <title>Experiment Configuration - Triage Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.35e1ed30.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:300,300i,400,400i,700,700i%7CUbuntu+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Ubuntu";--md-code-font:"Ubuntu Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../triage_docs.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="deep-orange">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#configuration" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Triage Documentation" class="md-header__button md-logo" aria-label="Triage Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 22a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2h-6v7L9.5 7.5 7 9V2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Triage Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Experiment Configuration
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="http://github.com/dssg/triage" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    dssg/triage
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Triage Documentation" class="md-nav__button md-logo" aria-label="Triage Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 22a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2h-6v7L9.5 7.5 7 9V2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12Z"/></svg>

    </a>
    Triage Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="http://github.com/dssg/triage" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    dssg/triage
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="https://colab.research.google.com/github/dssg/triage/blob/master/example/colab/colab_triage.ipynb" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Online Tutorial (Google Colab)
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Get started with your own project
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Get started with your own project
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../quickstart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quickstart guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../triage_project_workflow/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Suggested workflow
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Dirty Duck Tutorial
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Dirty Duck Tutorial
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../dirtyduck/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Welcome!
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../dirtyduck/dirty_duckling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dirty duckling
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Case studies
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Case studies
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../dirtyduck/problem_description/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Problem description
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../dirtyduck/eis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Early Warning System
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../dirtyduck/inspections/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Resource prioritization
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Triage
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Triage
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../dirtyduck/triage_intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    A deeper look into triage
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Are you curious about the setup?
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            Are you curious about the setup?
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../dirtyduck/infrastructure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Infrastructure
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../dirtyduck/data_preparation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data preparation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../dirtyduck/for_the_impatient/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quick setup
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Triage documentation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Triage documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" checked>
        
          
          <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Experiment
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            Experiment
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Experiment Configuration
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Experiment Configuration
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#experiment-configuration" class="md-nav__link">
    Experiment Configuration
  </a>
  
    <nav class="md-nav" aria-label="Experiment Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#config-version" class="md-nav__link">
    Config Version
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#experiment-metadata" class="md-nav__link">
    Experiment Metadata
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#time-splitting" class="md-nav__link">
    Time Splitting
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cohort-config" class="md-nav__link">
    Cohort Config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#label-generation" class="md-nav__link">
    Label Generation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#feature-generation" class="md-nav__link">
    Feature Generation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#feature-grouping-optional" class="md-nav__link">
    Feature Grouping (optional)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-metadata" class="md-nav__link">
    User Metadata
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#model-grouping-optional" class="md-nav__link">
    Model Grouping (optional)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bias-audit-config-optional" class="md-nav__link">
    Bias Audit Config (optional)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#model-grid-presets" class="md-nav__link">
    Model Grid Presets
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grid-configuration" class="md-nav__link">
    Grid Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prediction" class="md-nav__link">
    Prediction
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#model-scoring" class="md-nav__link">
    Model Scoring
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#individual-importances" class="md-nav__link">
    Individual Importances
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../feature-testing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing Feature Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../running/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Running an Experiment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_4" >
        
          
          <label class="md-nav__link" for="__nav_5_1_4" id="__nav_5_1_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Upgrading an Experiment
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1_4">
            <span class="md-nav__icon md-icon"></span>
            Upgrading an Experiment
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../upgrade-to-v8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    v7 -> v8
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../upgrade-to-v7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    v6 -> v7
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../upgrade-to-v6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    v5 -> v6
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../upgrade-to-v5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    v3/v4 -> v5
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../temporal-validation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Temporal Validation Deep Dive
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../cohort-labels/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cohort and Label Deep Dive
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../prediction-ranking/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Prediction Ranking
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../features/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Feature Generation Recipe Book
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../algorithm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Experiment Algorithm
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Experiment Architecture
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Model selection
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            Model selection
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../audition/audition_intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Intro to Audition
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../audition/model_selection/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Model Selection Concepts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/audition/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Postmodeling
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            Postmodeling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../postmodeling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using Postmodeling
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../postmodeling/postmodeling-config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Postmodeling & Crosstabs Configuration
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../dirtyduck/ml_governance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Model governance
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../predictlist/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Predictlist
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../dirtyduck/aws_batch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scaling up
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../db/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Database Provisioner
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_8" >
        
          
          <label class="md-nav__link" for="__nav_5_8" id="__nav_5_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_8">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_8_1" >
        
          
          <label class="md-nav__link" for="__nav_5_8_1" id="__nav_5_8_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Audition
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_8_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_8_1">
            <span class="md-nav__icon md-icon"></span>
            Audition
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/audition/auditioner/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Auditioner
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/audition/audition-config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Audition Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/audition/selection_rules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Selection Rules
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/audition/database-dependencies/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Database Dependencies
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#experiment-configuration" class="md-nav__link">
    Experiment Configuration
  </a>
  
    <nav class="md-nav" aria-label="Experiment Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#config-version" class="md-nav__link">
    Config Version
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#experiment-metadata" class="md-nav__link">
    Experiment Metadata
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#time-splitting" class="md-nav__link">
    Time Splitting
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cohort-config" class="md-nav__link">
    Cohort Config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#label-generation" class="md-nav__link">
    Label Generation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#feature-generation" class="md-nav__link">
    Feature Generation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#feature-grouping-optional" class="md-nav__link">
    Feature Grouping (optional)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-metadata" class="md-nav__link">
    User Metadata
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#model-grouping-optional" class="md-nav__link">
    Model Grouping (optional)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bias-audit-config-optional" class="md-nav__link">
    Bias Audit Config (optional)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#model-grid-presets" class="md-nav__link">
    Model Grid Presets
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grid-configuration" class="md-nav__link">
    Grid Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prediction" class="md-nav__link">
    Prediction
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#model-scoring" class="md-nav__link">
    Model Scoring
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#individual-importances" class="md-nav__link">
    Individual Importances
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permanent link">#</a></h1>
<p>Explain the parameters for running Triage experiments</p>
<p>Triage is a great tool to make our life easier by semi-automating many different tasks when we are doing predictive anlaytics projects, so that the users can focus more on the problem formulation and modeling than implementation. The configuration helps users define the parameters in an experiment. To run a full Triage experiment, users are required to define <code>experiment.yaml</code> and <code>audition.yaml</code>. The <code>postmodeling_config.yaml</code> and <code>postmodeling_crosstabs.yaml</code> are
optional, only for users who want to use <code>triage.postmodeling</code> module after experiment. </p>
<h2 id="experiment-configuration">Experiment Configuration<a class="headerlink" href="#experiment-configuration" title="Permanent link">#</a></h2>
<p>Also check out the example file <a href="https://github.com/dssg/triage/blob/master/example/config/experiment.yaml"><code>experiment.yaml</code></a>.</p>
<h3 id="config-version">Config Version<a class="headerlink" href="#config-version" title="Permanent link">#</a></h3>
<ul>
<li><code>config_version</code>: The experiment configuration changes from time to time, and we upgrade the <code>triage.experiments.CONFIG_VERSION</code> variable whenever drastic changes that break old configuration files are released. Be sure to assign the config version that matches the <code>triage.experiments.CONFIG_VERSION</code> in the triage release you are developing against!</li>
</ul>
<h3 id="experiment-metadata">Experiment Metadata<a class="headerlink" href="#experiment-metadata" title="Permanent link">#</a></h3>
<ul>
<li><code>model_comment</code> (optional): will end up in the model_comment column of the models table for each model created in this experiment.</li>
<li><code>random_seed</code> (optional): will be set in Python at the beginning of the experiment and affect the generation of all model seeds. If omitted, a random value will be chosen and recorded in the database to allow for future replication.</li>
</ul>
<h3 id="time-splitting">Time Splitting<a class="headerlink" href="#time-splitting" title="Permanent link">#</a></h3>
<p>This section defines a set of parameters used in label generation and temporal cross-validation. </p>
<p>Dates should be specified as date strings of the format <code>YYYY-MM-DD</code>. Intervals should be specified as strings of the <a href="https://www.postgresql.org/docs/11/datatype-datetime.html#DATATYPE-INTERVAL-INPUT">Postgres interval input format</a>.</p>
<p>Some parameters accept lists of arguments. If multiple arguments are specified, Triage will run experiments on each available permutation of time splitting arguments. Arguments to parameters that take lists <strong>must</strong> be specified as lists, even if specifying a single variable.</p>
<p>Note that these default values were selected to simplify the beginnings of your project, and are by no means <em>suggested</em> values.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Default</th>
<th>Example</th>
<th>Takes List</th>
</tr>
</thead>
<tbody>
<tr>
<td>feature_start_time</td>
<td>Earliest date included in features</td>
<td>date</td>
<td>Earliest date in feature_aggregations from_objs</td>
<td>'1995-01-01'</td>
<td>No</td>
</tr>
<tr>
<td>feature_end_time</td>
<td>Latest date included in features</td>
<td>date</td>
<td>Latest date in feature_aggregations from_objs</td>
<td>'2015-01-01'</td>
<td>No</td>
</tr>
<tr>
<td>label_start_time</td>
<td>Earliest date for which labels are available</td>
<td>date</td>
<td>Latest date in feature_aggregations from_objs</td>
<td>'2012-01-01'</td>
<td>No</td>
</tr>
<tr>
<td>label_end_time</td>
<td>Day AFTER last label date (all dates in any model are before this date)</td>
<td>date</td>
<td>latest date in feature_aggregations from_objs</td>
<td>'2015-01-01'</td>
<td>No</td>
</tr>
<tr>
<td>model_update_frequency</td>
<td>How frequently to retrain models</td>
<td>interval</td>
<td>'100y'</td>
<td>'4 months'</td>
<td>No</td>
</tr>
<tr>
<td>training_as_of_date_frequencies</td>
<td>Time between as of dates for the same entity in train matrix</td>
<td>interval</td>
<td>['100y']</td>
<td>['1 week']</td>
<td>Yes</td>
</tr>
<tr>
<td>test_as_of_date_frequencies</td>
<td>Time between as of dates for the same entity in test matrix</td>
<td>interval</td>
<td>['100y']</td>
<td>['1 week']</td>
<td>Yes</td>
</tr>
<tr>
<td>max_training_histories</td>
<td>Length of time included in a train matrix</td>
<td>interval</td>
<td>['0d']</td>
<td>['1 month']</td>
<td>Yes</td>
</tr>
<tr>
<td>test_durations</td>
<td>Length of time included in a test matrix</td>
<td>interval</td>
<td>['0d']</td>
<td>['1 month']</td>
<td>Yes</td>
</tr>
<tr>
<td>training_label_timespans</td>
<td>Amount of time required to determine an entity's label. Affects training sets. See the <a href="https://dssg.github.io/triage/experiments/cohort-labels/#what-are-cohorts-and-labels-in-triage">Label Deep Dive</a> for more information.</td>
<td>interval</td>
<td>No default</td>
<td>['1 month']</td>
<td>Yes</td>
</tr>
<tr>
<td>test_label_timespans</td>
<td>Same as above, affecting test sets.</td>
<td>interval</td>
<td>No default</td>
<td>['1 month']</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Note that if your label timespan is the same in both testing and training, you can simply set a single <code>label_timespans</code> parameter instead of specifying both <code>training_label_timespans</code> and <code>test_label_timespans</code>.</p>
<p><img alt="Time splitting config" src="../temporal_config_graph.png" /></p>
<p>This diagram represents three train/test sets generated by the following temporal config. Date and interval parameters are labeled where they affect the plot.</p>
<div class="highlight"><pre><span></span><code><span class="nt">temporal_config</span><span class="p">:</span>
<span class="w">    </span><span class="nt">feature_start_time</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;2014-01-01&#39;</span>
<span class="w">    </span><span class="nt">feature_end_time</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;2015-03-01&#39;</span>

<span class="w">    </span><span class="nt">label_start_time</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;2014-03-01&#39;</span>
<span class="w">    </span><span class="nt">label_end_time</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;2015-03-01&#39;</span>

<span class="w">    </span><span class="nt">model_update_frequency</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;1</span><span class="nv"> </span><span class="s">month&#39;</span>
<span class="w">    </span><span class="nt">training_as_of_date_frequencies</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;1</span><span class="nv"> </span><span class="s">day&#39;</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">test_as_of_date_frequencies</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;1</span><span class="nv"> </span><span class="s">day&#39;</span><span class="p p-Indicator">]</span>

<span class="w">    </span><span class="nt">max_training_histories</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;3</span><span class="nv"> </span><span class="s">months&#39;</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">test_durations</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;3</span><span class="nv"> </span><span class="s">months&#39;</span><span class="p p-Indicator">]</span>

<span class="w">    </span><span class="nt">label_timespans</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;2</span><span class="nv"> </span><span class="s">months&#39;</span><span class="p p-Indicator">]</span>
</code></pre></div>
<h3 id="cohort-config">Cohort Config<a class="headerlink" href="#cohort-config" title="Permanent link">#</a></h3>
<p>Cohorts are configured by passing a query with placeholders for the <strong>as_of_date</strong>.</p>
<ul>
<li><code>cohort_conifg</code>:<ul>
<li><code>filepath</code>: The <code>filepath</code> key should have a relative link (to the working directory where you're running triage) to a file containing a sql query parameterized with an <code>'{as_of_date}'</code>, to select the entity_ids that should be included for a given date. The <code>{as_of_date}</code> will be replaced with each <code>as_of_date</code> that the experiment needs. The returned <code>entity_id</code> must be an integer.</li>
<li><code>query</code>: Instead of passing a file with your cohort query, you can include the query directly in the configuration file; this is not recommended as it required more maintanence to ensure that cohorts are consistent across experiments vs. storing cohort queries in their own files. It is retained for backwards compatibility with existing triage projects. <strong>Only one of <code>filepath</code> or <code>query</code> is permitted.</strong></li>
<li><code>name</code>: You may enter a <code>name</code> for your configuration. This will be included in the metadata for each matrix and used to group models. If you don't pass one, the string <code>default</code> will be used.</li>
</ul>
</li>
</ul>
<p>The cohort config section of your experiment config can optionally be omitted. If you don't specify it, it will default to all the entities in your event's tables  (from_obj in feature_aggregations). The name by default in this case will be 'all_entities'. As with the time splitting defaults, this may be a good starting point, but you will likely want to refine your cohort definition as you iterate on your project.</p>
<h3 id="label-generation">Label Generation<a class="headerlink" href="#label-generation" title="Permanent link">#</a></h3>
<p>Labels are configured by passing a query with placeholders for the <code>as_of_date</code> and <code>label_timespan</code>.</p>
<ul>
<li><code>label_config</code>:<ul>
<li><code>filepath</code>: A relative link to a file containing a query returning two columns: <code>entity_id</code> and <code>outcome</code>, based on a given <code>as_of_date</code> and <code>label_timespan</code>. The <code>as_of_date</code> and <code>label_timespan</code> must be represented by placeholders marked by curly brackets. The example in <code>experiment.yaml</code> reproduces the inspection outcome boolean-or logic. In addition, you can configure what label is given to entities that are in the matrix (see <strong>cohort_config</strong> section) but that do not show up in this label query.</li>
<li><code>query</code>: Instead of passing a file with your  query, you can include the query directly in the configuration file; this is not recommended as it required more maintanence to ensure that labels are consistent across experiments vs. storing label queries in their own files. It is retained for backwards compatibility with existing triage projects. <strong>Only one of <code>filepath</code> or <code>query</code> is permitted.</strong></li>
<li><code>include_missing_labels_in_train_as</code>: However, passing the key <code>include_missing_labels_in_train_as</code> allows you to pick True or False. By default, these will show up as missing/null.</li>
<li><code>name</code>: In addition to these configuration options, you can pass a name to apply to the label configuration that will be present in matrix metadata for each matrix created by this experiment, under the <code>label_name</code> key. The default label_name is <code>outcome</code>.</li>
</ul>
</li>
</ul>
<h3 id="feature-generation">Feature Generation<a class="headerlink" href="#feature-generation" title="Permanent link">#</a></h3>
<p>The aggregate features to generate for each train/test split. Implemented by wrapping <a href="https://github.com/dssg/triage/tree/config_doc/src/triage/component/collate">collate</a>. Most terminology here is taken directly from <a href="https://github.com/dssg/triage/tree/config_doc/src/triage/component/collate">collate</a>.</p>
<p>Each entry describes a collate.SpacetimeAggregation object, and the arguments needed to create it. Generally, each of these entries controls the features from one source table, though in the case of multiple groups may result in multiple output tables.</p>
<p>Rules specifying how to handle imputation of null values must be explicitly defined in your config file. These can be specified in two places: either within each feature or overall for each type of feature (<code>aggregates_imputation</code>, <code>categoricals_imputation</code>, <code>array_categoricals_imputation</code>). In either case, a rule must be given for each aggregation function/metric (e.g., <code>sum</code>, <code>max</code>, <code>avg</code>, etc) used, or a catch-all can be specified with <code>all</code>. Aggregation function-specific rules will take precedence over the <code>all</code> rule and feature-specific rules will take precedence over the higher-level rules. Several examples are provided below. The supported aggregation functions/metrics are subject to the aggreagtion functions of the version of postgres being used.</p>
<p>Available Imputation Rules:
- <code>mean</code>: The average value of the feature (for SpacetimeAggregation the mean is taken within-date).
- <code>constant</code>: Fill with a constant value from a required <code>value</code> parameter.
- <code>zero</code>: Fill with zero.
- <code>zero_noflag</code>: Fill with zero without generating an <strong>imputed</strong> flag. This option should be used only for cases where null values are explicitly known to be zero such as absence of an entity from an events table indicating that no such event has occurred.
- <code>null_category</code>: Only available for categorical features. Just flag null values with the null category column.
- <code>binary_mode</code>: Only available for aggregate column types. Takes the modal value for a binary feature.
- <code>error</code>: Raise an exception if any null values are encountered for this feature.</p>
<ul>
<li>
<p><code>feature_aggregations</code>: </p>
<ul>
<li><code>prefix</code>: prefix given to the resultant tables</li>
<li><code>from_obj</code>: from_obj is usually a source table but can be an expression, such as a join (ie <code>cool_stuff join other_stuff using (stuff_id)</code>)</li>
<li><code>knowledge_date_column</code>: The date column to use for specifying which records to include in temporal features. It is important that the column used specifies the date at which the event is known about, which may be different from the date the event happened.</li>
<li><code>aggregates_imputation</code>: top-level imputation rules that will apply to all aggregates functions can also specify <code>categoricals_imputation</code> or <code>array_categoricals_imputation</code>. You must specify at least one of the top-level or feature-level imputation to cover every feature being defined.<ul>
<li><code>all</code>: The <code>all</code> rule will apply to all aggregation functions, unless overridden by more specific one. This is a default/fallback imputation method for any aggregation from this <code>from_obj</code><ul>
<li><code>type</code>: every imputation rule must have a <code>type</code> parameter, while some (like 'constant') have other required parameters (<code>value</code> here)</li>
<li><code>value</code></li>
</ul>
</li>
<li><code>some aggregation function</code>: The reudction function used by the aggreagate such as <code>sum</code>, <code>count</code>, <code>avg</code>, <code>max</code> etc. Function-specific rules will take precedence over the catch-all rule.</li>
</ul>
</li>
<li>
<p><code>aggregates</code>: aggregates and categoricals define the actual features created. So at least one is required. Aggregates of numerical columns.</p>
<ul>
<li>No keys are used on this line, which marks the first aggregate in a list<ul>
<li><code>quantity</code>: Each quantity is a number of some and the list of metrics are applied to each quantity, e.g. <code>homeless::INT</code></li>
<li><code>imputation</code>:  Imputation rules specified at the level of specific features will take precedence over the higer-level rules specified above. Note that the 'count' and 'sum' metrics will be imputed differently here.<ul>
<li><code>count</code>:<ul>
<li><code>type</code>: <code>mean</code></li>
</ul>
</li>
<li><code>sum</code>:<ul>
<li><code>type</code>: <code>constant</code></li>
<li><code>value</code>: <code>137</code></li>
</ul>
</li>
</ul>
</li>
<li><code>metrics</code>: the metrics/aggreagtion functions listed here will be used for the current aggregation only and must be defined separately for all aggregations.<ul>
<li><code>count</code></li>
<li><code>sum</code></li>
</ul>
</li>
<li><code>coltype</code>: <code>smallint</code> (Optional, if you want to control the column type in the generated features tables)</li>
</ul>
</li>
<li>No keys are used on this line, which marks the second aggregate in a list<ul>
<li><code>quantity</code>: <code>some_flag</code> (Since we're specifying <code>aggregates_imputation</code> above, a feature-specific imputation rule can be omitted)</li>
<li><code>metrics</code>: <ul>
<li><code>max</code></li>
<li><code>sum</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p><code>categoricals</code>:  Categorical features. The column given can be of any type, but the choices must comparable to that type for equality within SQL The result will be one feature for each choice/metric combination.</p>
</li>
<li>(First column)<ul>
<li><code>column</code>: Note that we haven't specified a top level <code>categoricals_imputation</code> set of rules, so we have to include feature-specific imputation rules for both of our categoricals here.</li>
<li><code>imputation</code>:<ul>
<li><code>sum</code>:<ul>
<li><code>type</code>: <code>null_category</code></li>
</ul>
</li>
<li><code>max</code>:<ul>
<li><code>type</code>: <code>mean</code></li>
</ul>
</li>
</ul>
</li>
<li><code>choices</code>:</li>
<li><code>metrics</code>: <code>sum</code></li>
</ul>
</li>
<li>(Second column)<ul>
<li><code>column</code>: <code>shape</code> (As with the top-level imputation rules, <code>all</code> can be used for the feature-level rules to specify the same type of imputation for all aggregation functions)</li>
<li><code>imputation</code>:<ul>
<li><code>all</code>:
    <code>type</code>: <code>zero</code></li>
</ul>
</li>
<li><code>choice_query</code>: <code>select distinct shape from cool stuff</code></li>
<li><code>metrics</code>: <ul>
<li><code>sum</code></li>
</ul>
</li>
</ul>
</li>
<li><code>intervals</code>: The time intervals over which to aggregate features</li>
<li><code>groups</code>: A list of different columns to separately group by</li>
</ul>
</li>
</ul>
<h3 id="feature-grouping-optional">Feature Grouping (optional)<a class="headerlink" href="#feature-grouping-optional" title="Permanent link">#</a></h3>
<p>define how to group features and generate combinations</p>
<ul>
<li>
<p><code>feature_group_definition</code>: <code>feature_group_definition</code> allows you to create groups/subset of your features by different criteria. One can either specify <code>tables</code> or <code>prefix</code> (If omitted, all unique prefixes present in <code>feature_aggregations</code> will be used). </p>
<ul>
<li><code>tables</code>: allows you to send a list of collate feature tables (collate builds these by appending <code>aggregation_imputed</code> to the prefix)</li>
<li><code>prefix</code>: allows you to specify a list of feature name prefixes. Triage will consider prefixes sharing their initial string as the same (e.g., <code>bookings</code> will encompass <code>bookings_charges</code> as well as <code>bookings</code>). In other words, it's not actually maintaining a list of prefixes and searching for exact matches but trusting that prefixes do not overlap in this way.</li>
</ul>
</li>
<li>
<p><code>feature_group_strategies</code>: strategies for generating combinations of groups. available: all, leave-one-out, leave-one-in, all-combinations</p>
</li>
</ul>
<h3 id="user-metadata">User Metadata<a class="headerlink" href="#user-metadata" title="Permanent link">#</a></h3>
<p>These are arbitrary keys/values that you can have Triage apply to the metadata for every matrix in the experiment. Any keys you include here can be used in the <code>model_group_keys</code> below. User metadata makes Triage extensible to support ad hoc needs for your use case. In the early days of Triage, it was often used as a placeholder for yet-to-be developed features, such as setting a flag for a test run when there was not yet an option to preview experiment components before running. </p>
<p>Nowadays, user metadata is often used to store details of the system or data state that fall outside of Triage's purview. For example, on cross-systems projects, Triage is often run after an entity-matching algorithm that links users across different databases. When that entity-matching model is updated, the linkage of Triage <code>entity_id</code>s to source data records may change, invalidating the predictions tables.  To avoid this, you can add the model id of your entity matching model to the <code>user_metadata</code> that signifies which set of <code>entity_id</code>s was used to create a given model/model group. That way, you can don't accidentally match old predictions to new ids during postmodel exploration. </p>
<ul>
<li><code>user_metadata</code>: <ul>
<li><code>entity_model_id</code>: <code>em-0242ac120002</code> </li>
</ul>
</li>
</ul>
<h3 id="model-grouping-optional">Model Grouping (optional)<a class="headerlink" href="#model-grouping-optional" title="Permanent link">#</a></h3>
<p>Model groups are a way of partitioning trained models in a way that makes for easier analysis.</p>
<p><code>model_group_keys</code> defines a list of training matrix metadata and classifier keys that should be considered when creating a model group.</p>
<p>There is an extensive default configuration, which is aimed at producing groups whose constituent models are equivalent to each other in all ways except for when they were trained. This makes the analysis of model stability easier.</p>
<p>To accomplish this, the following default keys are used: <code>class_path</code>, <code>parameters</code>, <code>feature_names</code>, <code>feature_groups</code>, <code>cohort_name</code>, <code>state</code>, <code>label_name</code>, <code>label_timespan</code>, <code>as_of_date_frequency</code>, <code>max_training_history</code></p>
<p>If you want to override this list, you can supply a <code>model_group_keys</code> value. All of the defaults are available, along with some other temporal information that could be useful for more specialized analyses:</p>
<p><code>first_as_of_time</code>, <code>last_as_of_time</code>, <code>matrix_info_end_time</code>, <code>as_of_times</code>, <code>feature_start_time</code></p>
<p>You can also use any pieces of user_metadata that you included in this experiment definition, as they will be present in the matrix metadata. 
- <code>model_group_keys</code>: [<code>feature_groups</code>, <code>label_definition</code>]</p>
<h3 id="bias-audit-config-optional">Bias Audit Config (optional)<a class="headerlink" href="#bias-audit-config-optional" title="Permanent link">#</a></h3>
<p>Every evaluation will include a bias audit (using the Aequitas toolkit).
To run the bias audit it is necessary to define the protected groups by defining attributes (e.g. race) for every entity</p>
<p>from_obj parameter: it can be a table name or a query (such as with features generators)
The from_obj is expected to have the protected attributes in a single table with a entity_id and knowledge date column</p>
<p>Triage will use the most recent entry of the source table with date &lt; than current as_of_date as the value for those attributes in a given as of date</p>
<p>Running the bias audit might be slow, so the user should specify which thresholds should be used for the bias audit</p>
<p>Please have a look to Aequitas documentation for further information about the ref_groups_method
<a href="https://dssg.github.io/aequitas/config.html">https://dssg.github.io/aequitas/config.html</a>
By default uses the min_metric, meaning for each bias metric it uses as reference the group with minimum metric value (e.g. the group defined by race that has the lower FPR)
Alternatively it can be 'majority' (picks the largest group to serve as reference) or 'predefined' (needs a list of key values, see below)</p>
<h3 id="model-grid-presets">Model Grid Presets<a class="headerlink" href="#model-grid-presets" title="Permanent link">#</a></h3>
<p>Triage now comes with a set of predefined <em>recommended</em> grids named: quickstart, small, medium, large
See the documentation for recommended uses cases for those.</p>
<p>If you set this configuration section you SHOULD NOT include the grid_config section</p>
<ul>
<li><code>model_grid_presets</code>: One of 'quickstart', 'small', 'medium', 'large'</li>
</ul>
<h3 id="grid-configuration">Grid Configuration<a class="headerlink" href="#grid-configuration" title="Permanent link">#</a></h3>
<p>The classifier/hyperparameter combinations that should be trained</p>
<p>Each top-level key should be a class name, importable from triage. sklearn is available, and if you have another classifier package you would like available, contribute it to requirement/main.txt</p>
<ul>
<li><code>grid_config</code>: Each lower-level key is a hyperparameter name for the given classifier, and each value is a list of potential values. All possible combinations of classifiers and hyperparameters are trained. Please check out the <a href="https://github.com/dssg/triage/blob/6cb43f9cca032a980cbc25a9501e9559135fd04d/example/config/experiment.yaml#L276">grid_config section</a> in <code>experiment.yaml</code> as for a detailed example.</li>
</ul>
<p>NOTE: Triage now include a new parameter named 'model_grid_presets' (see above)
you can't have both at the same time. The experiment will fail if you forget this.</p>
<h3 id="prediction">Prediction<a class="headerlink" href="#prediction" title="Permanent link">#</a></h3>
<p>How predictions are computed for train and test matrices? This is used only for <em>stored</em> predcitions and only affect postmodeling analysis (not model scoring), so if you are not stroing predictions, this will not affect anything.</p>
<ul>
<li><code>prediction</code>: Rank tiebreaking - In the predictions.rank_abs and rank_pct columns, ties in the score are broken either at random or based on the <code>worst</code> or <code>best</code> options. <code>worst</code> is the default.</li>
</ul>
<p><code>worst</code> will break ties with the ascending label value, so if you take the top <strong>k</strong> predictions, and there are ties across the <strong>k</strong> threshold, the predictions above the threshold will be negative labels if possible.</p>
<p><code>best</code> will break ties with the descending label value, so if you take the top <strong>k</strong> predictions, and there are ties across the <strong>k</strong> threshold, the predictions above the threshold will be positive labels if possible.</p>
<p><code>random</code> will choose one random ordering to break ties. The result will be affected by current state of Postgres' random number generator. Before ranking, the generator is seeded based on the <strong>model</strong>'s random seed.</p>
<h3 id="model-scoring">Model Scoring<a class="headerlink" href="#model-scoring" title="Permanent link">#</a></h3>
<p>How each trained model is scored?</p>
<p>Each entry in <code>testing_metric_groups</code> needs a list of one of the metrics defined in catwalk.evaluation.ModelEvaluator.available_metrics (contributions welcome!) Depending on the metric, either thresholds or parameters.</p>
<p><code>Parameters</code>: specify any hyperparameters needed. For most metrics, which are simply wrappers of sklearn functions, these are passed directly to sklearn. </p>
<ul>
<li><code>thresholds</code> are more specific: The list is dichotomized and only the top percentile or top n entities are scored as positive labels</li>
</ul>
<p>subsets, if passed, will add evaluations for subset(s) of the predictions to the subset_evaluations tables, using the same testing and training metric groups as used for overall evaluations but with any thresholds reapplied only to entities in the subset on the relevant as_of_dates. For example, when calculating <strong>precision@5_pct</strong> for the subset of women, the ModelEvaluator will count as positively labeled the top 5% of women, rather than any women in the top 5% overall. This is useful if, for example, different interventions will be applied to different subsets of entities (e.g., one program will provide subsidies to the top 500 women with children and another program will provide shelter to the top 150 women without children) and you would like to see whether a single model can be used for both applications. Subsets can also be used to see how a model's performance would be affected if the requirements for intervention eligibility became more restricted.</p>
<h3 id="individual-importances">Individual Importances<a class="headerlink" href="#individual-importances" title="Permanent link">#</a></h3>
<p>How feature importances for individuals should be computed. This entire section can be left blank, in which case the defaults will be used.</p>
<ul>
<li><code>individual_importance</code>:<ul>
<li><code>methods</code>: Refer to <em>how to compute</em> individual importances. Each entry in this list should represent a different method. Available methods are in the catwalk library's: <code>catwalk.individual_importance.CALCULATE_STRATEGIES</code> list. Will default to <code>uniform</code>, or just the global importances. Empty list means don't calculate individual importances. Individual importances take up the largest amount of database space, so an empty list is a good idea unless you need them.</li>
<li><code>n_ranks</code>: The number of top features per individual to compute importances for. Will default to 5.</li>
</ul>
</li>
</ul>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/dssg/triage" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/datascifellows" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://linkedin.com/company/center-for-data-science-and-public-policy-university-of-chicago" target="_blank" rel="noopener" title="linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.aecac24b.min.js"></script>
      
        <script src="../../js/mermaid.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>